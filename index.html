<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche Personnage</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #eef;
        }
        .character-sheet {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            background-color: #fff;
            box-shadow: 2px 2px 12px rgba(0,0,0,0.1);
        }
        h2 {
            border-bottom: 2px solid #333;
            padding-bottom: 5px;
            color: #333;
        }
        .section {
            margin-bottom: 20px;
        }
        .section p {
            margin: 8px 0;
        }
        input, textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            padding: 10px 15px;
            color: #fff;
            background-color: #333;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="character-sheet" id="character-sheet">
        <h1>Fiche Personnage</h1>

        <div class="section">
            <h2>Informations de base</h2>
            <p><strong>Nom du personnage:</strong> <input type="text" id="name" placeholder="Nom"></p>
            <p><strong>Âge ou date de naissance:</strong> <input type="text" id="age" placeholder="Âge ou date de naissance"></p>
            <p><strong>Sexe et éventuellement orientation sexuelle:</strong> <input type="text" id="gender" placeholder="Sexe et orientation"></p>
            <p><strong>Apparence physique:</strong> <textarea id="appearance" placeholder="Description"></textarea></p>
            <p><strong>Profession ou rôle dans l'intrigue:</strong> <input type="text" id="profession" placeholder="Profession ou rôle"></p>
            <p><strong>Citée ou surnom:</strong> <input type="text" id="nickname" placeholder="Citée ou surnom"></p>
        </div>

        <div class="section">
            <h2>Personnalité</h2>
            <p><strong>Traits de caractère:</strong> <textarea id="traits" placeholder="Traits"></textarea></p>
            <p><strong>Forces et faiblesses:</strong> <textarea id="strengths" placeholder="Forces et faiblesses"></textarea></p>
            <p><strong>Objectifs et motivations:</strong> <textarea id="goals" placeholder="Objectifs et motivations"></textarea></p>
            <p><strong>Peurs et faiblesses:</strong> <textarea id="fears" placeholder="Peurs et faiblesses"></textarea></p>
            <p><strong>Valeurs et croyances:</strong> <textarea id="values" placeholder="Valeurs et croyances"></textarea></p>
        </div>

        <div class="section">
            <h2>Histoire personnelle</h2>
            <p><strong>Passé du personnage:</strong> <textarea id="past" placeholder="Passé"></textarea></p>
            <p><strong>Événements clés:</strong> <textarea id="key-events" placeholder="Événements clés"></textarea></p>
            <p><strong>Conflits:</strong> <textarea id="conflicts" placeholder="Conflits"></textarea></p>
        </div>

        <div class="section">
            <h2>Relations</h2>
            <p><strong>Amis, ennemis, et relations importantes:</strong> <textarea id="relations" placeholder="Relations"></textarea></p>
            <p><strong>Dynamique entre le personnage et les autres:</strong> <textarea id="dynamics" placeholder="Dynamique"></textarea></p>
            <p><strong>Relations amoureuses ou familiales:</strong> <textarea id="love-relations" placeholder="Relations amoureuses ou familiales"></textarea></p>
        </div>

        <div class="section">
            <h2>Développement et arc narratif</h2>
            <p><strong>Évolution du personnage:</strong> <textarea id="evolution" placeholder="Évolution"></textarea></p>
            <p><strong>Objectifs à long terme:</strong> <textarea id="long-term-goals" placeholder="Objectifs à long terme"></textarea></p>
            <p><strong>Événements modifiant le personnage:</strong> <textarea id="changing-events" placeholder="Événements"></textarea></p>
        </div>

        <div class="section">
            <h2>Citation ou réplique clé</h2>
            <p><strong>Réplique importante:</strong> <textarea id="quote" placeholder="Réplique"></textarea></p>
        </div>

        <div class="section">
            <h2>Autres détails</h2>
            <p><strong>Apparence ou comportement distinctif:</strong> <textarea id="distinctive-appearance" placeholder="Apparence ou comportement"></textarea></p>
            <p><strong>Passions ou hobbies:</strong> <textarea id="hobbies" placeholder="Passions ou hobbies"></textarea></p>
            <p><strong>Souvenirs ou objets significatifs:</strong> <textarea id="memories" placeholder="Souvenirs ou objets"></textarea></p>
        </div>

        <button onclick="saveCharacterData()">Enregistrer</button>
        <button onclick="downloadPDF()">Télécharger en PDF</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script>
        function saveCharacterData() {
            const characterData = {
                name: document.getElementById('name').value,
                age: document.getElementById('age').value,
                gender: document.getElementById('gender').value,
                appearance: document.getElementById('appearance').value,
                profession: document.getElementById('profession').value,
                nickname: document.getElementById('nickname').value,
                traits: document.getElementById('traits').value,
                strengths: document.getElementById('strengths').value,
                goals: document.getElementById('goals').value,
                fears: document.getElementById('fears').value,
                values: document.getElementById('values').value,
                past: document.getElementById('past').value,
                keyEvents: document.getElementById('key-events').value,
                conflicts: document.getElementById('conflicts').value,
                relations: document.getElementById('relations').value,
                dynamics: document.getElementById('dynamics').value,
                loveRelations: document.getElementById('love-relations').value,
                evolution: document.getElementById('evolution').value,
                longTermGoals: document.getElementById('long-term-goals').value,
                changingEvents: document.getElementById('changing-events').value,
                quote: document.getElementById('quote').value,
                distinctiveAppearance: document.getElementById('distinctive-appearance').value,
                hobbies: document.getElementById('hobbies').value,
                memories: document.getElementById('memories').value
            };
            localStorage.setItem('characterData', JSON.stringify(characterData));
            alert('Données enregistrées!');
        }

        function downloadPDF() {
            html2canvas(document.getElementById('character-sheet'), {
                onrendered: function(canvas) {
                    var imgData = canvas.toDataURL('image/png');
                    var doc = new jsPDF();
                    doc.addImage(imgData, 'PNG', 10, 10);
                    doc.save('fiche_personnage.pdf');
                }
            });
        }

        window.onload = function() {
            if (localStorage.getItem('characterData')) {
                const characterData = JSON.parse(localStorage.getItem('characterData'));
                for (const key in characterData) {
                    if (characterData.hasOwnProperty(key)) {
                        document.getElementById(key).value = characterData[key];
                    }
                }
            }
        }
    </script>
</body>
</html>
